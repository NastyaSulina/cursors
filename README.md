# Fluid-cursor

–ù–µ–±–æ–ª—å—à–∞—è GPU-—Å–∏–º—É–ª—è—Ü–∏—è ¬´–∫—Ä–∞—Å–∫–∏ –∑–∞ –∫—É—Ä—Å–æ—Ä–æ–º¬ª –Ω–∞ Three.js (WebGL2)

<img src="public/example.png" width="600" alt="–ü—Ä–∏–º–µ—Ä —Å–∏–º—É–ª—è—Ü–∏–∏" />
<img src="public/example-1.png" width="600" alt="–ü—Ä–∏–º–µ—Ä —Å–∏–º—É–ª—è—Ü–∏–∏" />

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```sh
pnpm install
pnpm build:dev
pnpm start
```

–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:

```tsx
import { FluidCanvas } from './fluid'

export default function App() {
    return <FluidCanvas />
}
```

## ‚úÖ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- WebGL2 (—Ç.–∫. –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è RedFormat, RGFormat, half-float —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥)
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä —Å –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–º —É—Å–∫–æ—Ä–µ–Ω–∏–µ–º (Chrome/Edge ‚Äî –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ)

## üß™ –ü–∞–π–ø–ª–∞–π–Ω

1. **Splat** ‚Äî –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–¥ –∫—É—Ä—Å–æ—Ä–æ–º –ø–ª–æ—Ç–Ω–æ—Å—Ç—å (—Ü–≤–µ—Ç) –∏ –∏–º–ø—É–ª—å—Å —Å–∫–æ—Ä–æ—Å—Ç–∏.
2. **Advection (Velocity + Density)** ‚Äî –ø–æ—Ç–æ–∫ —É–Ω–æ—Å–∏—Ç –∏ —Å–∫–æ—Ä–æ—Å—Ç—å, –∏ —Ü–≤–µ—Ç–∞. –ü–æ—è–≤–ª—è—é—Ç—Å—è —Ö–≤–æ—Å—Ç—ã –∏ —Ä–∞—Å—Ç—è–∂–∫–∏ –∫—Ä–∞—Å–∫–∏.
3. **–í–∏—Ö—Ä–∏ (Curl + Vorticity)** ‚Äî —Å—á–∏—Ç–∞–µ—Ç –∑–∞–∫—Ä—É—á–µ–Ω–Ω–æ—Å—Ç—å –ø–æ—Ç–æ–∫–∞ –∏ –∞–∫–∫—É—Ä–∞—Ç–Ω–æ —É—Å–∏–ª–∏–≤–∞–µ—Ç –≤–∏—Ö—Ä–∏. –ü–æ—è–≤–ª—è–µ—Ç—Å—è –º–µ–ª–∫–∞—è —Ä—è–±—å –∏ —É—Å–∏–ª–∏–≤–∞—é—Ç—Å—è –∑–∞–≤–∏—Ç–∫–∏.
4. **–ù–µ—Å–∂–∏–º–∞–µ–º–æ—Å—Ç—å (Divergence + Pressure + Gradient subtract)** ‚Äî —É–±–∏—Ä–∞–µ—Ç —Å–∂–∞—Ç–∏–µ/—Ä–∞—Å—à–∏—Ä–µ–Ω–∏–µ –ø–æ—Ç–æ–∫–∞, –¥–µ–ª–∞–µ—Ç –¥–≤–∏–∂–µ–Ω–∏–µ –±–æ–ª–µ–µ –≤–æ–¥—è–Ω—ã–º –∏ —É—Å—Ç–æ–π—á–∏–≤—ã–º.
5. **Display** ‚Äî –≤—ã–≤–æ–¥–∏—Ç –ø–ª–æ—Ç–Ω–æ—Å—Ç—å –Ω–∞ —ç–∫—Ä–∞–Ω.

–î–ª—è —Ç–µ–∫—Å—Ç—É—Ä —Å–∫–æ—Ä–æ—Å—Ç–∏/–ø–ª–æ—Ç–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–∏–Ω–≥-–ø–æ–Ω–≥: —á—Ç–µ–Ω–∏–µ –∏–∑ read, –∑–∞–ø–∏—Å—å –≤ write, –∑–∞—Ç–µ–º swap().

## üîß –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (constants.ts)

**DOWNSAMPLE** ‚Äî –ø–æ–Ω–∏–∂–µ–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è —Å–∏–º—É–ª—è—Ü–∏–∏

**VELOCITY_DISS** ‚Äî –∑–∞—Ç—É—Ö–∞–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏

- –ú–µ–Ω—å—à–µ ‚Üí –±–æ–ª–µ–µ –≤—è–∑–∫–æ, –º–µ–Ω—å—à–µ –ø–æ–¥—Ç—ë–∫–æ–≤, –¥–≤–∏–∂–µ–Ω–∏–µ —Ç—è–∂—ë–ª–æ–µ/–∑–∞–º–µ–¥–ª–µ–Ω–Ω–æ–µ
- –ë–æ–ª—å—à–µ ‚Üí –ª–µ–≥—á–µ –∏ –±—ã—Å—Ç—Ä–µ–µ, –±–æ–ª—å—à–µ –ø–æ–¥—Ç—ë–∫–æ–≤ –∏ –º–µ–ª–∫–∏—Ö –¥–µ—Ç–∞–ª–µ–π, —ç—Ñ—Ñ–µ–∫—Ç –±–æ–ª–µ–µ –∂–∏–¥–∫–∏–π  
  _–†–µ–∫–æ–º.: 0.98‚Äì0.999_

**DENSITY_DISS** ‚Äî –≤—ã—Ü–≤–µ—Ç–∞–Ω–∏–µ –∫—Ä–∞—Å–∫–∏

- –ú–µ–Ω—å—à–µ ‚Üí —Å–ª–µ–¥ –±—ã—Å—Ç—Ä–æ –∏—Å—á–µ–∑–∞–µ—Ç
- –ë–æ–ª—å—à–µ ‚Üí –∫–∞–¥—Ä –∑–∞–±–∏–≤–∞–µ—Ç—Å—è —Ü–≤–µ—Ç–æ–º  
  _–†–µ–∫–æ–º.: 0.97‚Äì0.995_

**PRESSURE_DISS** ‚Äî –ø–∞–º—è—Ç—å –¥–∞–≤–ª–µ–Ω–∏—è

- –ú–µ–Ω—å—à–µ ‚Üí —Å–∏–ª—å–Ω–µ–µ –≥–∞—Å–∏–º –¥–∞–≤–ª–µ–Ω–∏–µ —Å –ø—Ä–æ—à–ª–æ–≥–æ –∫–∞–¥—Ä–∞. –ò—Ç–æ–≥ —Å—Ç–∞–±–∏–ª—å–Ω–µ–µ, –Ω–æ –æ–±—ã—á–Ω–æ –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ **PRESSURE_ITERATIONS**
- –ë–æ–ª—å—à–µ ‚Üí –±–æ–ª—å—à–µ ¬´–Ω–∞—Å–ª–µ–¥—É–µ–º¬ª –¥–∞–≤–ª–µ–Ω–∏–µ. –ú–æ–∂–Ω–æ –≤—ã—Å—Ç–∞–≤–ª—è—Ç—å –º–µ–Ω—å—à–µ **PRESSURE_ITERATIONS**, –Ω–æ —Ä–∞—Å—Ç—ë—Ç —Ä–∏—Å–∫ –∞—Ä—Ç–µ—Ñ–∞–∫—Ç–æ–≤  
  _–†–µ–∫–æ–º.: 0.95‚Äì0.985_

**PRESSURE_ITERATIONS** ‚Äî –∏—Ç–µ—Ä–∞—Ü–∏–∏ –¥–∞–≤–ª–µ–Ω–∏—è. _–†–µ–∫–æ–º.: 15‚Äì40_

**CURL_STRENGTH** ‚Äî —Å–∏–ª–∞ –∑–∞–≤–∏—Ç–∫–æ–≤. _–†–µ–∫–æ–º.: 2‚Äì20_

**COLOR_INTERVAL (–º—Å)** ‚Äî —á–∞—Å—Ç–æ—Ç–∞ —Å–º–µ–Ω—ã –æ—Ç—Ç–µ–Ω–∫–∞. _–†–µ–∫–æ–º.: 120‚Äì250_
