# Fluid-cursor

–ù–µ–±–æ–ª—å—à–∞—è GPU-—Å–∏–º—É–ª—è—Ü–∏—è ¬´–∫—Ä–∞—Å–∫–∏ –∑–∞ –∫—É—Ä—Å–æ—Ä–æ–º¬ª –Ω–∞ Three.js (WebGL2)

## üöÄ –ë—ã—Å—Ç—Ä—ã–π —Å—Ç–∞—Ä—Ç

```
pnpm install
pnpm build:dev
pnpm start
```

–ü–æ–¥–∫–ª—é—á–µ–Ω–∏–µ –∫–æ–º–ø–æ–Ω–µ–Ω—Ç–∞:

```
import { FluidCanvas } from './fluid';

export default function App() {
  return <FluidCanvas />;
}
```

## ‚úÖ –¢—Ä–µ–±–æ–≤–∞–Ω–∏—è

- WebGL2 (–æ–±—è–∑–∞—Ç–µ–ª–µ–Ω: –∏—Å–ø–æ–ª—å–∑—É—é—Ç—Å—è RedFormat, RGFormat, half-float —Ä–µ–Ω–¥–µ—Ä–∏–Ω–≥)
- –°–æ–≤—Ä–µ–º–µ–Ω–Ω—ã–π –±—Ä–∞—É–∑–µ—Ä —Å –∞–ø–ø–∞—Ä–∞—Ç–Ω—ã–º —É—Å–∫–æ—Ä–µ–Ω–∏–µ–º (Chrome/Edge ‚Äî –ø—Ä–µ–¥–ø–æ—á—Ç–∏—Ç–µ–ª—å–Ω–æ)

## üß™ –ü–æ—Ä—è–¥–æ–∫ –ø—Ä–æ—Ö–æ–¥–æ–≤ –∑–∞ –∫–∞–¥—Ä

1. **Splat** ‚Äî –¥–æ–±–∞–≤–ª—è–µ—Ç –ø–æ–¥ –∫—É—Ä—Å–æ—Ä–æ–º —Ü–≤–µ—Ç –∏ –∏–º–ø—É–ª—å—Å —Å–∫–æ—Ä–æ—Å—Ç–∏

2. **Advection (velocity)** ‚Äî –ø–µ—Ä–µ–Ω–æ—Å–∏—Ç –ø–æ–ª–µ —Å–∫–æ—Ä–æ—Å—Ç–∏ —Å–∞–º–∏–º –∂–µ –ø–æ—Ç–æ–∫–æ–º. –î–∞—ë—Ç –∏–Ω–µ—Ä—Ü–∏—é –∏ —Ö–≤–æ—Å—Ç—ã –¥–≤–∏–∂–µ–Ω–∏—è; —á–µ–º –≤—ã—à–µ –∑–∞—Ç—É—Ö–∞–Ω–∏–µ, —Ç–µ–º –±—ã—Å—Ç—Ä–µ–µ —É—Å–ø–æ–∫–∞–∏–≤–∞–µ—Ç—Å—è —Ç–µ—á–µ–Ω–∏–µ

3. **Advection (density)** ‚Äî —É–Ω–æ—Å–∏—Ç ¬´–∫—Ä–∞—Å–∫—É¬ª —Ç–µ–∫—É—â–µ–π —Å–∫–æ—Ä–æ—Å—Ç—å—é. –û–±—Ä–∞–∑—É–µ—Ç —Å—Ç—Ä—É–∏ –∏ —Ä–∞—Å—Ç—è–∂–∫–∏ —Ü–≤–µ—Ç–∞, –º–µ–Ω—å—à–µ–µ –∑–∞—Ç—É—Ö–∞–Ω–∏–µ ‚Äî –¥–æ–ª—å—à–µ –¥–µ—Ä–∂–∏—Ç—Å—è —Å–ª–µ–¥

4. **Curl** ‚Äî —Å—á–∏—Ç–∞–µ—Ç –ª–æ–∫–∞–ª—å–Ω—É—é –∑–∞–∫—Ä—É—á–µ–Ω–Ω–æ—Å—Ç—å –ø–æ—Ç–æ–∫–∞

5. **Vorticity confinement** ‚Äî –∞–∫–∫—É—Ä–∞—Ç–Ω–æ —É—Å–∏–ª–∏–≤–∞–µ—Ç –≤–∏—Ö—Ä–∏. –î–µ–ª–∞–µ—Ç –±–æ–ª—å—à–µ –º–µ–ª–∫–∏—Ö –∑–∞–≤–∏—Ç–∫–æ–≤

6. **Divergence** ‚Äî –∏–∑–º–µ—Ä—è–µ—Ç, –Ω–∞—Å–∫–æ–ª—å–∫–æ –ø–æ—Ç–æ–∫ ¬´—Å–∂–∏–º–∞–µ—Ç—Å—è/—Ä–∞–∑–∂–∏–º–∞–µ—Ç—Å—è¬ª

7. **Pressure clear / solve** ‚Äî –æ—á–∏—â–∞–µ—Ç –∏ –∏—Ç–µ—Ä–∞—Ç–∏–≤–Ω–æ —Ä–µ—à–∞–µ—Ç –¥–∞–≤–ª–µ–Ω–∏–µ. –°–≥–ª–∞–∂–∏–≤–∞–µ—Ç —Å–∂–∏–º–∞–µ–º–æ—Å—Ç—å, —Å—Ç–∞–±–∏–ª–∏–∑–∏—Ä—É–µ—Ç —Ç–µ—á–µ–Ω–∏–µ, —á—Ç–æ–±—ã –∫—Ä–∞—Å–∫–∞ –Ω–µ —Ä–∞–∑–¥—É–≤–∞–ª–∞—Å—å –∏ –Ω–µ —Å—Ö–ª–æ–ø—ã–≤–∞–ª–∞—Å—å

8. **Gradient subtract** ‚Äî –≥–∞—Å–∏—Ç –¥–∏–≤–µ—Ä–≥–µ–Ω—Ü–∏—é, –æ—Å—Ç–∞–≤–ª—è—è —Ç–æ–ª—å–∫–æ ¬´—á–∏—Å—Ç–æ–µ¬ª –≤—Ä–∞—â–∞—Ç–µ–ª—å–Ω–æ–µ –¥–≤–∏–∂–µ–Ω–∏–µ (¬´—Ñ–∏–∑–∏—á–µ—Å–∫–∏–π —Ç–æ—Ä–º–æ–∑¬ª)

9. **Display** ‚Äî –≤—ã–≤–æ–¥–∏—Ç –ø–ª–æ—Ç–Ω–æ—Å—Ç—å –Ω–∞ —ç–∫—Ä–∞–Ω

–î–ª—è —Ç–µ–∫—Å—Ç—É—Ä —Å–∫–æ—Ä–æ—Å—Ç–∏/–ø–ª–æ—Ç–Ω–æ—Å—Ç–∏ –∏—Å–ø–æ–ª—å–∑—É–µ—Ç—Å—è –ø–∏–Ω–≥-–ø–æ–Ω–≥: —á—Ç–µ–Ω–∏–µ –∏–∑ read, –∑–∞–ø–∏—Å—å –≤ write, –∑–∞—Ç–µ–º swap().

## üîß –û—Å–Ω–æ–≤–Ω—ã–µ –Ω–∞—Å—Ç—Ä–æ–π–∫–∏ (constants.ts)

**DOWNSAMPLE** ‚Äî –ø–æ–Ω–∏–∂–µ–Ω–∏–µ —Ä–∞–∑—Ä–µ—à–µ–Ω–∏—è —Å–∏–º—É–ª—è—Ü–∏–∏

**VELOCITY_DISS** ‚Äî –∑–∞—Ç—É—Ö–∞–Ω–∏–µ —Å–∫–æ—Ä–æ—Å—Ç–∏

- –ú–µ–Ω—å—à–µ: –≤—è–∑–∫–æ, –∑–∞–≤–∏—Ç–∫–∏ –±—ã—Å—Ç—Ä–æ –≥–∞—Å–Ω—É—Ç
- –ë–æ–ª—å—à–µ: –¥–æ–ª—å—à–µ –∂–∏–≤—ë—Ç, –±–æ–ª—å—à–µ –¥–µ—Ç–∞–ª–µ–π  
  _–†–µ–∫–æ–º.: 0.98‚Äì0.999_

**DENSITY_DISS** ‚Äî –≤—ã—Ü–≤–µ—Ç–∞–Ω–∏–µ –∫—Ä–∞—Å–∫–∏

- –ú–µ–Ω—å—à–µ: —Å–ª–µ–¥ –±—ã—Å—Ç—Ä–æ –∏—Å—á–µ–∑–∞–µ—Ç
- –ë–æ–ª—å—à–µ: –∫–∞–¥—Ä –∑–∞–±–∏–≤–∞–µ—Ç—Å—è —Ü–≤–µ—Ç–æ–º  
  _–†–µ–∫–æ–º.: 0.97‚Äì0.995_

**PRESSURE_DISS** ‚Äî –ø–∞–º—è—Ç—å –¥–∞–≤–ª–µ–Ω–∏—è

- –ú–µ–Ω—å—à–µ: —Å—Ç–∞–±–∏–ª—å–Ω–µ–µ, –Ω–æ –Ω—É–∂–Ω–æ –±–æ–ª—å—à–µ –∏—Ç–µ—Ä–∞—Ü–∏–π  
  _–†–µ–∫–æ–º.: 0.95‚Äì0.985_

**PRESSURE_ITERATIONS** ‚Äî –∏—Ç–µ—Ä–∞—Ü–∏–∏ –¥–∞–≤–ª–µ–Ω–∏—è

- –ú–µ–Ω—å—à–µ: –±—ã—Å—Ç—Ä–µ–µ, –Ω–æ –ø–æ—Ç–æ–∫ —Å–∂–∏–º–∞–µ–º—ã–π
- –ë–æ–ª—å—à–µ: —á–∏—â–µ –∏ ¬´–Ω–µ—Å–∂–∏–º–∞–µ–º–µ–µ¬ª, –¥–æ—Ä–æ–∂–µ  
  _–†–µ–∫–æ–º.: 15‚Äì40_

**CURL_STRENGTH** ‚Äî —Å–∏–ª–∞ –∑–∞–≤–∏—Ç–∫–æ–≤

**COLOR_INTERVAL (–º—Å)** ‚Äî —á–∞—Å—Ç–æ—Ç–∞ —Å–º–µ–Ω—ã –æ—Ç—Ç–µ–Ω–∫–∞

- –ú–µ–Ω—å—à–µ: —Ä–∞–¥—É–∂–Ω–µ–µ
- –ë–æ–ª—å—à–µ: —Ä–µ–∂–µ —Å–º–µ–Ω–∞, —Ä–æ–≤–Ω–µ–µ –ø–æ–ª–æ—Å—ã  
  _–†–µ–∫–æ–º.: 120‚Äì250_
